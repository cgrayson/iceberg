<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Iceberg, by cgrayson</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Iceberg</h1>
        <p>Find the big directories lurking under the surface of your disk</p>
        <p class="view"><a href="https://github.com/cgrayson/iceberg">View the Project on GitHub <small>cgrayson/iceberg</small></a></p>
        <ul>
          <li><a href="http://cgrayson.github.com/iceberg/iceberg.sh">Download <strong>Bash script</strong></a></li>
          <li><a href="https://github.com/cgrayson/iceberg">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>

<h1>Introduction</h1>

<p>Iceberg is the updated incarnation of a surprisngly useful tool that I originally wrote in Java, which
 makes it easy to find the big directories that are wasting space on your disks.</p>

<p>This version has two parts: a Bash script that generates an interactive HTML disk report, and the
JavaScript and CSS that give it its interactivity. The latter, plus Bootstrap and jQuery, are
loaded from the Internet, so you don't need to download them to use Iceberg.</p>

<p>This functionality has proven useful time and time again, not only on my Mac laptop, but also on the
various Linux machines I work with. That's why the HTML generation is done by a Bash script, it
seemed like a good choice for lowest-common denominator in those *nix environments. Usage on
remote servers, which you may or may not have a GUI for, is also the reason for splitting the
report-generation part from the report-viewing part. Generate the HTML on your remote machine,
download it to your local PC, and pop it open in the browser of your choice.</p>

<h1>Intallation & Usage</h1>

<ol>
<li><p>Download the script: <a href="iceberg.sh">iceberg.sh</a>.</p></li>
<li><p>Make it executable:</p>
  <p><code>chmod +x iceberg.sh</code></p>
</li>
<li>
<p>Invoke the Bash script, specifying HTML output and the directory to report on, saving the
output to a file:</p>

<p><code>iceberg.sh ~/Movies &gt; iceberg_movies.html</code></p>
</li>
<li><p>Open the HTML file in your browser (after downloading it to your PC if necessary).
It will look something like this:</p>
<p><img src="images/screenshot-movies.png" width="600" height="276" alt="Screenshot"></p>
<p>You can also see a live, interactive <a href="http://cgrayson.github.com/iceberg/test/ice_linux.html">sample
page here</a>.</p>
</li>
<li><p>The page starts with directories 1GB or larger highlighted in red. Change that threshold
with the size buttons at the top of the window.</p></li>
<li><p>Click on folder/directory buttons to expand them and see their subdirectories. Directories
with no subdirectories cannot be expanded (those buttons are deactivated).</p></li>
<li><p>Find those directories with old backups, unneeded downloads, etc. that are wasting your disk space,
and go clean them up.</p></li>
<li><p>Repeat as desired. Remember, the HTML report is a static file. If you add or delete files,
you'll need to re-run the Bash script, and refresh your browser.</p></li>
<li><p>Options:</p>
  <dl>
    <dt><code>-d du_input_filename</code></dt>
    <dd>Tells Iceberg to not run the <code>du</code> command, but instead to use the given input file.
      Useful for development testing, or if you want to get directory-size info from a remote
      machine without installing <code>iceberg.sh</code> on it.</dd>
    <dt><code>-l</code></dt>
    <dd>Mainly for development testing: when generating the HTML, this option tells Iceberg to link
      local JavaScript and CSS, rather than the links to the latest versions on Iceberg's website
      as it normally does.</dd>
    <dt><code>-p</code></dt>
    <dd>Instructs Iceberg to create plain text output, rather than HTML. May be useful for small
      directory trees, especially on servers without web browsers handy.</dd>
    <dt><code>-t tmp_dir</code></dt>
    <dd>Specifies a temporary directory (the default is the current directory, aka ".") During
      operation, Iceberg creates a temporary file for the <code>du</code> output, which may
      be large. Note that the HTML output, which may also be large, can be placed elsewhere
      if necessary by using the output redirect (&gt;).</dd>
  </dl>
</li>
</ol>

<h1>Issues</h1>

<ul>
<li><strong>Windows compatibility</strong> - There is none, currently. Maybe this would work under cygwin, but I
haven't tried that yet.</li>
<li><strong>HTML generation speed</strong> - I've tried to make this fast, and it's come a long way from my first
brute-force approach. But it can still take a long time on a filesystem with lots of subdirectories.
(Note that especially large files or directories are no problem; it's the number of directories
that matters.) For example, generating the report for the approximately 110,000 directories
under my laptop's home directory takes about 10 minutes, and creates a 17MB HTML file.</li>
<li><strong>HTML processing speed</strong> - I've tried to make the JavaScript controls fast, too. But for large
report files, the rendering and processing may be slow. For example, that 17MB report for my
laptop's home directory takes about 8 seconds to load.</li>
</ul>

<h1>Feedback</h1>
<p>
  Questions, problems, or suggestions? If you're on GitHub, then you can open an issue, fork, etc.
  from the <a href="https://github.com/cgrayson/iceberg">project page there</a>. If you're a normal
  person, your best bet is probably to contact me on Twitter at
  <a href="https://twitter.com/cgrayson">@cgrayson</a>.
</p>

    </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/cgrayson">cgrayson</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
  </body>
</html>